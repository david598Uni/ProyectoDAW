<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../node_modules/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="../node_modules/font-awesome/css/font-awesome.css">

    <link rel="stylesheet" href="CSS_General/main.css">
    <link rel="stylesheet" href="CSS_General/login.css">

    <title>Inicio Sesion</title>

</head>

<body>
    <div class="container-fluid h-100">
        <div class="row justify-content-center align-items-center h-100">
            <div class="card mb-2 shadow-sm p-2 rounded">
              
               <div class="card-body ">
                <form name="sesion" onsubmit="logeo();" method="post">
                    <div class="form-group">
                        <input name="usuario" id="usuario" class="form-control form-control-lg" placeholder="Usuario" type="text">
                    </div>
                    <div class="form-group">
                        <input name="password" id="password" class="form-control form-control-lg" placeholder="ContraseÃ±a" type="password">
                    </div>
                    <div class="form-group">
                        <input type="submit"  class="btn btn-login btn-lg btn-block" value="Login"></input>
                    </div>
                </form>
               </div>
              
                
            </div>
           
        </div>
    </div>

    <script>
       
        function logeo(){

            var user = document.querySelector('#usuario').value;
            var password =  document.querySelector('#password').value;
            var formulario = document.querySelector('form');

            var usuarioOK = datos.usuarios.find(
                function(u){ 
                    return u.usuario === user && u.password === password;
                });
               
             if(usuarioOK){
                alert("credenciales correctas");

                //guardamos valores en el sessionstorage
               
                sessionStorage.setItem("usuario",usuarioOK.usuario);
                sessionStorage.setItem("password",usuarioOK.password);
                sessionStorage.setItem("rol",usuarioOK.password);

                var time = new Date();
                sessionStorage.setItem("conexion",time.getTime());
                sessionStorage.setItem("expira",time.setMinutes(5));

                if(usuarioOK.rol == "alumno"){
                    formulario.action = "general/principal_alumno.html";
                }else if(usuarioOK.rol == "profesor"){
                    formulario.action = "general/principal_profesor.html";
                }
              


            }else{
                alert("credenciales no correctas");
              
            }
        }
    </script>

</body>
<!-- JS -->
<!-- jquery 3.5.1 -->
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
    crossorigin="anonymous"></script>
<!-- bootstrap 4.6.1 -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF"
    crossorigin="anonymous"></script>
<script src="JS/datos.js"></script>


</html>